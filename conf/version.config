/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Container Versions Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Centralized container versions for all modules
    Update versions here to change across all processes
----------------------------------------------------------------------------------------
*/

params {
    // Container versions for tools
    subread_version         = '2.0.6--he4a0461_2'
    
    // Container registries
    biocontainers_registry  = 'biocontainers'
    galaxyproject_registry  = 'https://depot.galaxyproject.org/singularity'
}

process {
    // Module-specific container versions
    withName: 'SUBREAD_FEATURECOUNTS' {
        // ✅ CORREGIDO: Usar evaluación en runtime, no en config time
        container = { workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ? 
            "${params.galaxyproject_registry}/subread:${params.subread_version}" : 
            "${params.biocontainers_registry}/subread:${params.subread_version}" 
        }
    }
}